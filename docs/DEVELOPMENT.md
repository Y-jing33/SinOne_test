# 开发指南

## 环境搭建

### 必需软件
1. **Keil uVision** (推荐版本5.x或更高)
2. **C51编译器** (随Keil安装)

### 环境配置
1. 安装Keil uVision开发环境
2. 确保C51编译器已正确安装
3. 克隆或下载本项目代码

## 编译和构建

### 打开项目
1. 启动Keil uVision
2. 打开项目文件: `SC95F8523_8522_8521_8520S_8520M_Demo_Code/Demo.uvproj`

### 项目配置
1. 选择正确的目标芯片型号
2. 在`Options for Target → Target1 → BL51 Locate`中设置:
   - Code Range: `0x100`
3. 根据需要选择是否使用DISRST功能

### 编译项目
1. 点击工具栏的编译按钮或按F7键
2. 检查编译输出窗口确认无错误
3. 生成的HEX文件将在输出目录中

## 功能测试

### 选择测试模块
在`main.c`文件中修改`Test`宏定义：
```c
#define Test  6    // 选择要测试的功能模块（0-12）
```

### 各模块说明

#### 0 - BTM (基本定时器)
- 文件: `c/BTM.c`
- 功能: 演示基本定时器的配置和使用

#### 1 - EXTI (外部中断)
- 文件: `c/EX_Init.c`
- 功能: 演示外部中断的配置和处理

#### 2 - Timer (定时器)
- 文件: `c/Timer_Init.c`
- 功能: 演示定时器的高级功能

#### 3 - PWM (脉宽调制)
- 文件: `c/PWM_Init.c`
- 功能: 演示PWM波形生成

#### 4 - UART (串口通信)
- 文件: `c/Uart_Init.c`
- 功能: 演示串口通信功能

#### 5-7 - USCI (通用串行通信接口)
- 文件: `c/USCI0_Init.c`, `c/USCI1_Init.c`, `c/USCI2_Init.c`
- 功能: 演示SPI/I²C等通信协议

#### 8 - ADC (模数转换)
- 文件: `c/ADC_Init.c`
- 功能: 演示模拟信号采集

#### 9 - IAP (在线编程)
- 文件: `c/IAP_Init.c`
- 功能: 演示Flash存储器编程

#### 10 - 乘除法运算
- 文件: `c/Multiplication_Division.c`
- 功能: 演示硬件乘除法器

#### 11 - CRC (循环冗余校验)
- 文件: `c/CRC_Init.c`
- 功能: 演示数据校验功能

#### 12 - SmartCard (智能卡)
- 文件: `c/SmartCard.c`
- 功能: 演示智能卡接口

## 调试指南

### 硬件连接
1. 连接调试器(如J-Link、ST-Link等)
2. 连接目标板电源
3. 确保时钟配置正确

### 软件调试
1. 在Keil中设置断点
2. 启动调试会话
3. 使用单步执行和变量监视功能

### 常见问题
1. **编译错误**: 检查头文件路径和芯片型号设置
2. **下载失败**: 检查硬件连接和调试器配置
3. **程序不运行**: 检查时钟配置和复位设置

## 代码贡献

### 代码风格
- 遵循K&R风格的C代码格式
- 使用有意义的变量和函数名
- 添加适当的注释

### 提交规范
- 使用清晰的提交信息
- 每个功能单独提交
- 测试后再提交代码

### 分支管理
- main分支用于稳定版本
- develop分支用于开发
- feature分支用于新功能开发

## 性能优化

### 代码优化
- 避免不必要的循环
- 合理使用中断
- 优化存储器使用

### 功耗优化
- 使用低功耗模式
- 关闭不用的外设
- 优化时钟配置

## 测试

### 单元测试
- 每个模块都应有对应的测试代码
- 验证边界条件
- 测试错误处理

### 集成测试
- 测试模块间的交互
- 验证系统级功能
- 性能基准测试

## 文档

### 代码文档
- 使用Doxygen格式的注释
- 为每个函数添加说明
- 更新相关文档

### 用户文档
- 保持README.md更新
- 更新CHANGELOG.md
- 提供使用示例
